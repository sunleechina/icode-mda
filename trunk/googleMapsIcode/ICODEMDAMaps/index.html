<!DOCTYPE html>
<html>
  <head>
     <title>ICODE-MDA Maps</title>
     <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" >
     <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

     <link rel="stylesheet" type="text/css" href="css/style.css">

     <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=geometry,drawing,weather,visualization&sensor=false"> </script>
     <script type="text/javascript" src='scripts/icode-maps.js' ></script>
     <script type="text/javascript" src='scripts/markerclusterer.js' ></script>
     <script type="text/javascript" src='scripts/infobubble.js' ></script>

     <script type="text/javascript" language="Javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
     <script>window.jQuery || document.write('<script src="scripts/jquery.min.js"><\/script>')</script>

     <!-- <link href='http://fonts.googleapis.com/css?family=Lato:400,900' rel='stylesheet' type='text/css'> -->

     <script type="text/javascript" src='scripts/fade.js' ></script>

     <script type="text/javascript" src="scripts/geoxml3.js"></script>
     <script type="text/javascript" src="scripts/ProjectedOverlay.js"></script>

     <script type="text/javascript" src="scripts/jQueryRotate.2.2.js"></script>
     <script type="text/javascript" src="scripts/jquery.activity-indicator-1.0.0.js"></script>

     <script type="text/javascript" src="scripts/ExtDraggableObject.js"></script>
     <script type="text/javascript" src="scripts/trackTimeSlider.js"></script>
     <script type="text/javascript" src="scripts/maplabel-compiled.js"></script>

     <script type="text/javascript" src="scripts/CSJSRequestObject.js"></script>

     <script type="text/javascript" src="scripts/fileUpload.js"></script>

     <!-- Theme downloaded from http://jqueryui.com/download/#!zThemeParams=5d00000100f405000000000000003d8888d844329a8dfe02723de3e5701fa198449035fc0613ff729a37dd818cf92b1f6938fefa90282d04ae436bb72367f5909357c629e832248af2c086db4ab730aa4cced933a88449eca61db9f7f3b23d47f58a712d809b6088edfb34ad39fdc365386d0fa05a1ac3ecd320d2c989729f79ebdc6c6c1efbdad4c8411d498f009ffe98fe129da7602fb950113abdae4a76a6c41a4b54b4f82bb8821d6d431cd3fdd76b9d621596a2728b93385f2e7aaf8ea6603553343d43829941536e2bdd3ed7d7d3207364bf351633b31b934a71523a88fa2058cdd4c2e0778cd56d6ccac254ddace19ff4460a100e2e6a52830d9063c6e328cc3cb5e3d6dbe1077ae8b7cc5fa6414eafd15883b40c6c3e71647031ce3da7038a945a5628669fbe0e5139dad7ce99c00f25c2cd40569bd2fe1b2caed45bf2b8943f6ac17215bd54437a0f739009848e80f1d5c00d99870e7258d07402af6b22872fdf8f2892a7e9274aaa9181573ddd8cd7788511b4459e736d76b3e64e015809712e904499648868a11e35b3bb8ee1168d6039c5a86eee8cf545c877dbdd0111ab04ede46a85a17baed0958026fe23d2e490cfa504ab598731d779a2434fa164085379d31e1ff08e2eeb9475cce3d5b3e9b2fd4df43dffe6cf0eda -->
     <script type="text/javascript" src="scripts/jquery-ui-1.10.3.custom.js"></script>
     <link rel="stylesheet" href="css/custom-theme/jquery-ui-1.10.3.custom.css">
     <script>
        $(function() {
           $( "#accordion" ).accordion({
              collapsible: true,
              heightStyle: "fill"
           });
           $(window).resize(function(){
              $("#accordion").accordion("refresh");
           });           
        });
     </script>

     <script>
        $(function() {
           $('#busy_indicator').activity({segments: 8, steps: 3, opacity: 0.3, width: 4, space: 0, length: 5, color: '#fff', speed: 2.0});
        });
     </script>

     <script>
        var panelhidden = false;
        $(function() {
        $( "#results_list" ).hide();
           $( "#showpanel" ).click(function() {
              $( "#panel" ).toggle("slide", { direction: 'right' }, 180);
              //$( "#panel" ).effect('fade').dequeue().toggle("slide", { direction: 'right' }, 180);

              $( "#results_list" ).toggle("slide", { direction: 'down' }, 180);

              !panelhidden ? $( "#showpanel" ).html("<<br><<br><") : $( "#showpanel" ).html("><br>><br>>");
              panelhidden = !panelhidden;
              return false;
           });
        });
     </script>

     <script>
        $(function() {
           $( "#dialog" ).dialog({
              autoOpen: true,
              modal: true,
              hide: "fade",
           });
           setTimeout(function(){ $( "#dialog" ).dialog("close")}, 2000);
        });
     </script>

     <script>
        $(function() {
           /*
           //Populate radar table list
           var radartablelist = $("#radartablelist");
           var getTableList = "query_radar_vessels_tablelist.php";

           $.getJSON(
           getTableList, // The server URL 
           { }
           ) //end .getJSON()
           .done(function (response) {
              $.each(response.tables, function(key,table) {
                 radartablelist.append($("<option />").text(table));
              });
           });

           //Populate AIS table list
           var currenttablelist = $("#currenttablelist");
           var getTableList = "query_current_vessels_tablelist.php";

           $.getJSON(
           getTableList, // The server URL 
           { }
           ) //end .getJSON()
           .done(function (response) {
              $.each(response.tables, function(key,table) {
                 currenttablelist.append($("<option />").text(table));
              });
           });
           */

           //Populate common date table list
           var commontablelist = $("#commondatelist");
           var getTableList = "query_common_vessels_tablelist.php";

           $.getJSON(
           getTableList, // The server URL 
           { }
           ) //end .getJSON()
           .done(function (response) {
              $.each(response.tables, function(key,table) {
                 commontablelist.append($("<option />").text(table));
              });
           });

           appendLaisicView();
        });
     </script>


     <style>
        #feedback { font-size: 1em; }
        #selectable .ui-selecting { background: #FECA40; }
        #selectable .ui-selected { background: #F39814; color: white; }
        #selectable { list-style-type: none; margin: 0; padding: 0; width: 100%; }
        #selectable li { margin: 0px; padding: 0.5em; font-size: 1em; height: 10px; }
     </style>
     <script>
        $(function() {
           $( "#selectable" ).selectable({
              stop: function() { 
                 var result = [];
                 $( ".ui-selected", this ).each(function() {
                    var index = $( "#selectable li" ).index( this );
                    result.push( index + 1 );
                 });                 

                 clearOverlays();
                 clearAllTracks();
                 markersDisplayed = [];

                 if (markerArray) {
                    for (var i=0; i < markerArray.length; i++) {
                       if ($.inArray(i+1,result) != -1) {
                          markerArray[i].setMap(map);
                          var marker = markersQueried[i];
                          markersDisplayed.push(marker);
                       }
                    }
                 }
              }
           });           
        });
     </script>

  </head>

  <body onload="initialize()">

     <!--
     <div id="dialog" title="Welcome to ICODE-MDA Maps">
        <p>Use the query bar for SQL searches and the side menu for options. <br>
        Message will disappear in 2 seconds...</p>
     </div>
     -->

     <div id="panel_top">
        <div id="logo">
           <h2><a style="color: rgb(255,255,255)" href=".">ICODE-MDA</a></h2>
        </div>
        <div id="top_nav">
           <div>
              <form name="query_form"><input id="query" type="text" name="query" style="width:100%" onkeypress="if (event.which == 13) {enteredQuery();return false;}" onClick="this.select();this.onclick=null;" value="QUERY RUNNING..."><input hidden="true" type="hidden"></form>
           </div>
        </div>
        <div id="stats_nav">
           <!-- result count and query time to be shown here -->
        </div>
     </div>

     <div id="container">
        <!-- BEGIN LEFT PANEL -->  
        <div id="panel">

           <div id="accordion" class="accordion">
              <h3>Legend</h3>
              <div id="vessel_types">
                 <center><b>Vessel Types</b></center>
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#F078FF;stroke:#F078FF;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 Radar Vessels<br>
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="20" width="30" viewBox="-5 -10 20 20">
                 <path d="m -6 0 6 -6 6 6 -6 6 z m 12 0 l 8 0" style="fill:#A901DB;stroke:#A901DB;stroke-width:2;fill-rule:evenodd;">Browser does not support inline SVG.
                 </path>
                 </svg>
                 LAISIC Vessels<br>
                 <input class="checkboxallships" id="All Ships" name="All Ships" checked="false" type="checkbox" onclick="typeSelectedAllShips();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#FFFFFF;stroke:#000000;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 All Ships<br>
                 <input class="checkboxtype" id="0-Unspecified Ships" name="0-Unspecified Ships" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#F78181;stroke:#F78181;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 0 - Unspecified Ships<br>
                 <input class="checkboxtype" id="30-Fishing" name="30-Fishing" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#01DFD7;stroke:#01DFD7;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 30 - Fishing<br>
                 <input class="checkboxtype" id="31-Towing" name="31-Towing" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#DF7401;stroke:#DF7401;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 31 - Towing<br>
                 <input class="checkboxtype" id="32-Big Tow" name="32-Big Tow" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#DF7401;stroke:#DF7401;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 32 - Big Tow<br>
                 <input class="checkboxtype" id="35-Military" name="35-Military" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#0000FF;stroke:#0000FF;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 35 - Military<br>
                 <input class="checkboxtype" id="37-Pleasure Craft" name="37-Pleasure Craft" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#8904B1;stroke:#8904B1;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 37 - Pleasure Craft<br>
                 <input class="checkboxtype" id="51-Search and Rescue" name="51-Search and Rescue" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#BE3C14;stroke:#BE3C14;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 51 - Search & Rescue<br>
                 <input class="checkboxtype" id="52-Tug" name="52-Tug" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#DF7401;stroke:#DF7401;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 52 - Tug<br>
                 <input class="checkboxtype" id="33-Dredge" name="33-Dredge" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#DF7401;stroke:#DF7401;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 33 - Dredge<br>
                 <input class="checkboxtype" id="50-Pilot" name="50-Pilot" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#DF7401;stroke:#DF7401;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 50 - Pilot<br>
                 <input class="checkboxtype" id="55-Law Enforcement" name="55-Law Enforcement" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#0000FF;stroke:#0000FF;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 55 - Law Enforcement<br>
                 <input class="checkboxtype" id="6x-Passenger Vessels" name="6x-Passenger Vessels" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#01DF01;stroke:#01DF01;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 6x - Passenger Vessels<br>
                 <input class="checkboxtype" id="7x-Cargo Vessels" name="7x-Cargo Vessels" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#01DF01;stroke:#01DF01;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 7x - Cargo Vessels<br>
                 <input class="checkboxtype" id="8x-Tankers" name="8x-Tankers" checked="checked"  type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#01DF01;stroke:#01DF01;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 8x - Tankers<br>
                 <hr>
                 <center><b>Risk Level</b><br>(vessel outline)</center>
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#FFFFFF;stroke:#00F014;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 Low Risk<br>
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#FFFFFF;stroke:#F0FF78;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 Medium Risk<br>
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="15" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,8 4,8 4,-3 0,-8 -4,-3 -4,8 z" style="fill:#FFFFFF;stroke:#FF0014;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 High Risk<br>
              </div>

              <h3>Layer Types</h3>
              <div id="layer_types">
                 <center><b>TMACS WMS</b></center>
                 <input class="checkbox" id="TMACShead" name="TMACShead" type="checkbox" onclick="toggleTMACSHeadWMSLayer();"> TMAC Trackheads<br>
                 <input class="checkbox" id="TMACShistory" name="TMACShistory" type="checkbox" onclick="toggleTMACSHistoryWMSLayer();"> Track History<br>
                 <br>
                 <hr>
                 <center><b>Other Information</b></center>
                 <!-- input class="checkbox" id="RadarLayer" name="RadarLayer" type="checkbox" checked="checked" onclick="toggleRadarLayer();"> <img align="top" src="icons/pink0.png" style="padding-bottom: 4px; vertical-align: middle;"> RADAR Contacts<br> -->
                 <input class="checkbox" id="ClusterLayer" name="ClusterLayer" type="checkbox" checked="checked" onclick="toggleClusterLayer();"> <img align="top" width="20px" src="icons/cluster.png" style="padding-bottom: 4px; vertical-align: middle;"> Cluster Layer<br>
                 <input class="checkbox" id="HeatmapLayer" name="HeatmapLayer" type="checkbox" onclick="toggleHeatmapLayer();"> <img align="top" width="20px" src="icons/heatmap.png" style="padding-bottom: 4px; vertical-align: middle;"> Heatmap Layer<br>
                 <input class="checkbox" id="WeatherLayer" name="WeatherLayer" type="checkbox" onclick="toggleWeatherLayer();"> <img align="top" width="20px" src="icons/weather_icon.png" style="padding-bottom: 4px; vertical-align: middle;"> Weather Layer<br>
                 <!-- input class="checkbox" id="KMLLayer" name="KMLLayer" type="checkbox" onclick="toggleKMLLayer();"> <img align="top" width="20px" src="icons/kml.png" style="padding-bottom: 4px; vertical-align: middle;"> KML Layer<br> -->
                 <input class="checkbox" id="PortLayer" name="PortLayer" type="checkbox" onclick="togglePortLayer();"> <img align="top" height="20px" src="icons/anchor_port.png" style="padding-bottom: 4px; vertical-align: middle;"> Port Layer<br>
                 </p>
              </div>
              
              <h3>Upload LAISIC bin</h3>
              <div>
                 Select a date to view data:<br />
                 <small>(Please note LAISIC data might not match; <br />it will be whatever was uploaded)</small>
                 <br>
                 <select class="appendtable" id="commondatelist">
                    <option>Select table</option>
                 </select>
                 <hr />
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="20" width="30" viewBox="-5 -10 20 20">
                 <path d="m -6 0 6 -6 6 6 -6 6 z m 12 0 l 8 0" style="fill:#A901DB;stroke:#A901DB;stroke-width:2;fill-rule:evenodd;">Browser does not support inline SVG.
                 </path>
                 </svg>
                 LAISIC contact<br /><hr />
                 Upload LAISIC bin file: <br />
                 <form id="laisicform" >
                    <input class="ivnputfilebutton" type="file" name="file" size="5" />
                    <input class="inputfilebutton" type="button" onClick="var form=this.form;$.getJSON('emptyuploadtable.php',{}).done(function (response){fileUpload(form,'laisic/laisicbinupload.php','upload');}); return false;" value="Upload">
                 </form>
                 <div id="uploadlaisic"></div>

                 <!--
                 <br><br>
                 Select a radar table to append to view:
                 <br>
                 <select class="appendtable" id="radartablelist">
                    <option>Select table</option>
                 </select>
                 <br><br>
                 Select an AIS table to append to view:
                 <br>
                 <select class="appendtable" id="currenttablelist">
                    <option>Select table</option>
                 </select>
                 -->
                 <hr />
                 <form id="overlayform" >
                    Input an AIS MMSI:
                    <input class="overlay" type="text" id="mmsi" /><br /><br />
                    Input a RADAR Track ID #:
                    <input class="overlay" type="text" id="trackid" /><br />
                    <!-- <input class="overlay" type="button" onClick="getCurrentAISFromDB(map.getBounds(), 'SELECT * FROM (SELECT * FROM current_vessels' + sourcesDate + ' UNION SELECT messagetype, mmsi, navstatus, rot, sog, lon, lat, cog, true_heading, datetime, imo, vesselname, vesseltypeint, length, shipwidth, bow, stern, port, starboard, draught, destination, callsign, posaccuracy, eta, posfixtype, streamid FROM upload_table) VESSELS WHERE mmsi=' + $('#mmsi').val() + ' UNION SELECT * FROM radar_vessels' + sourcesDate + ' where imo=' + $('#trackid').val(), true, function(){queryAllTracks();}); return false;" value="Display Contacts and Tracks"> -->
                    <input class="overlay" type="button" onClick="getCurrentAISFromDB(map.getBounds(), 'SELECT * FROM (SELECT * FROM current_vessels' + sourcesDate + ' UNION SELECT * FROM upload_table_view) VESSELS WHERE mmsi=' + $('#mmsi').val() + ' UNION SELECT * FROM radar_vessels' + sourcesDate + ' where imo=' + $('#trackid').val(), true, function(){queryAllTracks();}); return false;" value="Display Contacts and Tracks">
                 </form>
              </div>

              <h3>Upload KMZ</h3>
              <div>
                 Upload KMZ: <br />
                 <form id="kmlform" >
                    <input class="inputfilebutton" type="file" name="file" size="5" />
                    <input class="inputfilebutton" type="button" onClick="fileUpload(this.form,'kml/kmzextract.php','upload'); return false;" value="Upload">
                 </form>
                 <div id="upload"></div>
              </div>

              <h3>Query Builder</h3>
              <div>
                 Coming Soon...
              </div>

              <h3>Current Vessel List</h3>
              <div id="vessellist" class="vessellist"></div>

              <h3>Other Options</h3>
              <div>
                 <form id="distancetoolform" >
                    <input class="inputfilebutton" id="distancetooltoggle" type="button" onClick="toggleDistanceTool();" value="Enable distance tool">
                 </form>

                 <input class="checkbox" id="queryalltracks" name="queryalltracks" type="checkbox" onclick="toggleQueryAllTracks();"> Query tracks for vessels in view<br>
              </div>
           </div>
           <!-- END ACCORDION -->

        </div>
        <!-- END LEFT PANEL -->  

        <!-- BEGIN MAP AREA -->
        <div id="map_canvas">
        </div> 
        <!-- END MAP AREA -->

        <div id="showpanel" onmouseover="" style="cursor: pointer;">
           ><br>><br>>
        </div>
     </div>


     <!--
     <div id="results_list">
        <b>
           <table border=0>
              <col class="width10" />
              <col class="width10" />
              <col class="width10" />
              <col class="width10" />
              <col class="width10" />
              <col class="width10" />
              <col class="width10" />
              <col class="width10" />
              <col class="width10" />
              <td>MMSI</td><td>IMO</td><td>Vessel Name</td><td>Vessel Type</td><td>Datetime</td><td>Lat</td><td>Lon</td><td>SOG</td><td>COG</td>
           </table>
        </b><br />
        <ol id="selectable">
        </ol>        
     </div>
      -->
     

     <div id="busy_indicator"><div style="width: 32px; height: 32px;"></div></div>

     <div id="shipdetails">
     </div>

     <div id="latlong">
     </div>

     <div id="status-msg">
        Currently showing RADAR and raw full AIS for 2013-08-01
     </div>

  </body>
</html>

